/**
 * This client was automatically generated by Segment Typewriter. ** Do Not Edit **
 */

import Foundation

extension Array {
    func serializableArray() -> [Any] {
        var result = [Any]()
        
        for item in self {
            switch item {
            case let value as NSNumber:
                result.append(value)
            case let value as NSString:
                result.append(value)
            case let value as NSArray:
                result.append(value)
            case let value as NSDictionary:
                result.append(value)
            case let value as NSNull:
                result.append(value)
            default:
                break
            }
        }
        return result
    }
}

class TypewriterUtils {
    static func addContextFields(_ options: [String: Any]?) -> [String: Any] {
        var newOptions = (options ?? [String: Any]()) as [String: Any]
        let originalContext = newOptions["context"] as? [String: Any]
        
        let typewriterContext = [
            "typewriter": [
                "language": "swift",
                "version": "7.1.0"
            ]
        ]
        
        var newContext = [String: Any]()
        if let originalContext = originalContext {
            newContext.merge(originalContext) { _,_ in }
        }
        newContext.merge(typewriterContext) { _,_ in }
        newOptions["context"] = newContext
        
        return newOptions
    }
}
